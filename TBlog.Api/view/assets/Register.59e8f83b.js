import{V as u,R as _,a as f,_ as m}from"./logo.46271444.js";import{r as g,o as v,d as V,e,n,w as l,i as r,j as p,p as b,k as P}from"./vendor.18420dca.js";import{_ as x}from"./index.82895e5d.js";const C={data(){return{VCodeTip:"\u53D1\u9001\u9A8C\u8BC1\u7801",PhoneRegex:"",MailRegex:"",PassWordRegex:"",Phone:"",PassWord:"",Mail:"",VCode:"",IsSumbit:""}},methods:{async GetVerifyRegex(){let t=(await u({regexName:"Phone,Mail,PassWord"})).Data;for(var s in t)t[s].Key=="Phone"?this.PhoneRegex=t[s].Value:t[s].Key=="Mail"?this.MailRegex=t[s].Value:t[s].Key=="PassWord"&&(this.PassWordRegex=t[s].Value)},async SendVCode(){if(this.CheckPhoneOrMail()!=!1)if(this.VCodeTip=="\u53D1\u9001\u9A8C\u8BC1\u7801"){this.Countdown();let s=this.$refs.Phone.checkValidity()?this.Phone:this.Mail;await _({phoneOrMail:s})}else this.$toast.info("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5019")},async Countdown(){if(this.VCodeTip=="\u53D1\u9001\u9A8C\u8BC1\u7801")this.VCodeTip=60,this.Countdown();else if(this.VCodeTip>1){let t=this;setTimeout(()=>{t.VCodeTip--,t.Countdown()},1e3)}else this.VCodeTip=="\u53D1\u9001\u9A8C\u8BC1\u7801"},async RequestRegisterUser(){if(this.IsSumbit=!0,this.CheckPhoneOrMail()==!1||this.$refs.PassWord.checkValidity()==!1||this.$refs.VCode.checkValidity()==!1)return;let t={email:this.Mail,phone:this.Phone,password:this.PassWord,vCode:this.VCode},s=await f(t);if(s!=null&&s.Status==200){let d=this;this.$toast.info("\u5C06\u57283\u79D2\u540E\u8DF3\u8F6C\u81F3\u767B\u9646\u9875\u9762"),setTimeout(()=>{d.$router.push("/login")},3e3)}},CheckPhoneOrMail(){let t=this.$refs.Phone.checkValidity(),s=this.$refs.Mail.checkValidity();return!t&&!s?(this.$toast.warning("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u6216\u90AE\u7BB1"),!1):!0}},mounted(){this.GetVerifyRegex()}},o=t=>(b("data-v-52fa88e8"),t=t(),P(),t),y={class:"register-page",style:{"min-height":"466px"}},w={class:"login-box"},R={class:"card card-outline card-primary"},k=o(()=>e("div",{class:"card-header text-center"},[e("img",{class:"logoImg",src:m})],-1)),M={class:"card-body"},T=o(()=>e("p",{class:"login-box-msg h3"},"\u6CE8\u518C",-1)),W={class:"needs-validation"},I=["pattern"],S=o(()=>e("div",{class:"invalid-feedback"}," \u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E ",-1)),q=["pattern"],U=o(()=>e("div",{class:"invalid-feedback"}," \u624B\u673A\u53F7\u7801\u683C\u5F0F\u4E0D\u6B63\u786E ",-1)),j=["pattern"],A=o(()=>e("div",{class:"invalid-feedback"}," \u8981\u540C\u65F6\u542B\u6709\u6570\u5B57\u548C\u5B57\u6BCD\uFF0C\u4E14\u957F\u5EA6\u8981\u57288-16\u4F4D\u4E4B\u95F4 ",-1)),B={class:"input-group-prepend"},O=o(()=>e("div",{class:"invalid-feedback"}," \u8BF7\u8F93\u5165\u6B63\u786E\u7684\u9A8C\u8BC1\u7801 ",-1)),K={class:"social-auth-links text-center mt-2 mb-3"},N=o(()=>e("p",{class:"mb-0"},[e("a",{href:"/login",class:"text-center"},"\u6211\u5DF2\u7ECF\u6709\u4E86\u8D26\u53F7")],-1)),D=o(()=>e("div",{class:"mt-2 text-center"},[e("a",{href:"http://beian.miit.gov.cn",target:"_blank",class:"h6 mt-5 text-black-50"},"\xA9TBlog - \u7CA4ICP\u590720006712\u53F7\u3002")],-1));function G(t,s,d,z,i,c){const h=g("loadingbtn");return v(),V("div",y,[e("div",w,[e("div",R,[k,e("div",M,[T,e("form",W,[e("div",{class:n(["input-group mb-3",i.Mail.length!=0?"was-validated":""])},[l(e("input",{ref:"Mail",type:"text",class:"form-control",placeholder:"\u90AE\u7BB1",pattern:i.MailRegex,"onUpdate:modelValue":s[0]||(s[0]=a=>i.Mail=a),required:""},null,8,I),[[r,i.Mail]]),S],2),e("div",{class:n(["input-group mb-3",i.Phone.length!=0?"was-validated":""])},[l(e("input",{ref:"Phone",type:"text",class:"form-control",placeholder:"\u624B\u673A",pattern:i.PhoneRegex,"onUpdate:modelValue":s[1]||(s[1]=a=>i.Phone=a),required:""},null,8,q),[[r,i.Phone]]),U],2),e("div",{class:n(["input-group mb-3",i.IsSumbit||i.PassWord.length!=0?"was-validated":""])},[l(e("input",{ref:"PassWord",type:"password",class:"form-control",placeholder:"\u5BC6\u7801",pattern:i.PassWordRegex,"onUpdate:modelValue":s[2]||(s[2]=a=>i.PassWord=a),required:""},null,8,j),[[r,i.PassWord]]),A],2),e("div",{class:n(["input-group mb-3",i.IsSumbit||i.VCode.length!=0?"was-validated":""])},[e("div",B,[p(h,{class:"btn-primary",style:{"background-color":"var(--orange)","border-color":"var(--orange)"},awaitAction:c.SendVCode,btnText:i.VCodeTip},null,8,["awaitAction","btnText"])]),l(e("input",{ref:"VCode",type:"text",class:"form-control",pattern:"\\d{4}$","onUpdate:modelValue":s[3]||(s[3]=a=>i.VCode=a),required:""},null,512),[[r,i.VCode]]),O],2)]),e("div",K,[p(h,{class:"btn-block btn-primary",awaitAction:c.RequestRegisterUser,btnText:"\u6CE8\u518C"},null,8,["awaitAction"])]),N])]),D])])}var J=x(C,[["render",G],["__scopeId","data-v-52fa88e8"]]);export{J as default};
